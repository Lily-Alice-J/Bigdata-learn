##zookeeper

    1.保持数据一致性（最终一致性）
    2.数据订阅与发布功能（watch）

###选举机制

    1.leader
    2.过半机制
    3.预提交，收到ack(节点过半即可)，提交（两阶段提交）

###1.leader选举
	1.1 选举场景：集群启动/leader挂掉/follower挂掉集群没有过半节点
	1.2 选举依据：节点数据新旧程度-->事务ID（自增），事务ID越大节点能力越强
				  当所有节点事务ID相同时，继续比较Myid大小
				  
###2.ZAB协议
	2.1 leader选举
	2.2 数据同步
	2.3 接受请求（二阶段请求）
	
###3.脑裂问题
	3.1 当集群节点属于不同机房，出现网络故障分为两个集群。zookeeper会进行leader选举，即会出现多个leader，当网络恢复即出现了脑裂现象。
	3.2 过半机制（n/2）即可解决脑裂问题
	
###4.领导者源码研读

	4.1 通过查看zkServer.sh启动脚本,可得知实际上是调用QuorumPeerMain这个类main()
	4.2 只有集群中选出leader才能对外提供服务
	4.3 在启动配置文件中可以指定observer节点
	4.4 领导者选举算法共三种，可通过配置文件进行指定，默认快速领导者选举算法
